@using AMH.Common;
@using AMHAdmin.Pages;
@{
    ViewBag.Title = "ForgotPassword";
    Layout = null;
}

<link rel="stylesheet" href="~/assets/css/main.min.css">
<link rel="stylesheet" href="~/assets/css/style.css">
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
<style>
    .bb {
        align-content: center;
    }
</style>
<head>
    <title>Agric - Machinery and Health | Sign In</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="description" content="AMH Admin Login">
    <meta name="author" content="">

    <link rel="icon" href="~/favicon.ico" type="image/x-icon">
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="~/assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/assets/vendor/dropify/css/dropify.min.css">
    <!-- MAIN CSS -->
    <link href="~/assets/vendor/css/main.css" rel="stylesheet" />
    <link href="~/assets/vendor/css/color_skins.css" rel="stylesheet" />
    <script src="~/assets/validation/js/jquery.min.js"></script>
    <script src="~/assets/validation/js/bootstrap.min.js"></script>
    <script src="~/assets/validation/js/jquery.blockui.min.js"></script>
</head>
<body>


    <!--<div class="page-content mb-0">
        <div class="container  ">
            <div class="row">-->
    @*<div class="col-lg-2">
        </div>*@
    <!--<div class="col-lg-12">
                    <form method="post" id="addAdmin">

                        <div class="login-form ">
                            <h4 class="login-title text-center">Forgot Password</h4>

                            <div class="row">
                                <div class="col-md-4 col-12 mb-20">
                                </div>

                                <div class="col-md-4 col-12 mb-20">
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Email Address</label>
                                    <input class="mb-0" id="Email" Name="Email" type="text" placeholder="Email">
                                </div>


                                <div class="col-12">
                                    <button type="submit" id="btnLogin" class="register-button mt-0">GetResetLink</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>-->
    <div id="wrapper">
        <div class="vertical-align-wrap">
            <div class="vertical-align-middle auth-main">
                <div class="auth-box">

                    <div class="card">
                        <div class="header" style="text-align:center !important;">
                            <img src="~/assets/images/logo/logo.png" alt="Agric - Machinery and Health Admin Logo" height="50px" class="img-responsive logo or_logo mobile_logo mb-2">
                            @*<h4 class="fw-bold">GinnyBuddy</h4>*@
                            <p class="lead">Forgot Password</p>
                        </div>
                        <div class="body">
                            <h5 style="text-align:center;color:red;" id="wrgMsg"></h5>
                            <div class="form-auth-small">
                                <form method="post" id="addAdmin" action="" class="text-left" role="form">

                                    <div class="col-12">
                                        <label for="UserName" class="control-label sr-only">Email</label>
                                        <input type="text" id="Email" name="Email" class="form-control" placeholder="Enter your Email" />
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" id="btnLogin" class="btn btn-success btn-lg btn-block">GetResetLink</button>
                                    </div>

                                </form>
                              
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="~/assets/vendors/jquery/dist/jquery.min.js"></script>
    <script src="~/assets/js/jquery.validate.js"></script>
    <script src="~/assets/vendors/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script>

        $(document).ready(() => {
        $("#addAdmin").validate({
        rules: {
            Email: {
                required: true,
            }
        },

    errorPlacement: function (error, element) {
    if (element.is(":radio")) {
    error.appendTo(element.parents(".form-group"));
    } else {
    // This is the default behavior
    error.insertAfter(element);
    }
    },
    submitHandler: function (form) {
    ReserLink();
    }
    });

    });

        function ReserLink() {

           // var formData = new FormData();
          //  formData.append("Email", $("#Email").val());
               @*$.ajax({
                        type: "POST",
                        url: '@Url.Action(Actions.IsEmailIdExists, Controllers.Myaccount)',
                        data: ({ Email: $("#Email").val() }),
                        dataType: 'json',
                        success: function (response) {
                            if (response == true) {
                                Swal.fire({
                                    title: "warning",
                                    text: "Password saved successfully",
                                    icon: "warning",
                                    timer: 1000
                                })
                                setTimeout(
                                    function () {
                                        window.location.href = "/Account/SignIn"
                                    }, 3000)
                            } else {
                                Swal.fire({
                                    title: "warning",
                                    text: "Password saved successfully",
                                    icon: "warning",
                                    timer: 1000
                                })
                            }
                            $("#saveBtn").show();
                            $("#loading").hide();
                        },
                        error: function (response) {
                            $("#saveBtn").show();
                            $("#loading").hide();
                        }
                    });*@
          $.ajax({
                        type: "POST",
                        url: '@Url.Action(Actions.IsEmailIdExists, Controllers.Authentication)',
                        data: ({ Email: $("#Email").val() }),
                        dataType: 'json',
                        success: function (response) {
                            if (response == true) {
                                swal({
                                    title: "",
                                    text: "Your email has been verified and reset password link has been sent on your email.",
                                    icon: "success",
                                    timer: 3000
                                })
                                setTimeout(
                                    function () {
                                        window.location.href = "/Authentication/Signin"
                                    }, 3000)
                            } else {
                                swal({
                                    title: "",
                                    text: "Opps..! You are not registered with us.",
                                    icon: "warning"
                                })
                            }
                            $("#saveBtn").show();
                            $("#loading").hide();
                        },
                        error: function (response) {
                            $("#saveBtn").show();
                            $("#loading").hide();
                        }
                    });
        }
    </script>

</body>